function SolrQuery(){this.importancy={points:2.5,age:2.5},this.filterQuery=[],this.facetQuery={},this.fromDate=null,this.toDate=null,this.keywords="",this.rows=10}!function(){"use strict";angular.module("newscombinatorKeywords",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","nvd3"])}(),function(){"use strict";function e(e){function t(){this.start=0,this.siteState={loading:!1},this.expanded={},this.numFound=0,this.maxScore=0,this.news=[],this.results=[],this.documentIds=[],this.facets={},this.solrQuery=new SolrQuery}return t.prototype.setQuery=function(e){if(!(e instanceof SolrQuery))throw"SolrRequest needs a SolrQuery!";this.solrQuery=e},t.prototype.getLoading=function(){return this.siteState.loading},t.prototype.moreToLoad=function(){return this.numFound>this.results.length},t.prototype.getExpanded=function(){return this.expanded},t.prototype.loadNews=function(){var t=this;return this.siteState.loading!==!0?(this.siteState.loading=!0,e({method:"GET",url:"http://www.newscombinator.com/api/statistics",params:this.solrQuery.getHttpRequestParamObject()}).then(function(e){t.results=e.data.response.docs;for(var r=0;r<t.results.length;r++)t.documentIds.push(t.results[r].id);t.expanded=e.data.expanded||{},t.facets=e.data.facets||{},t.start=e.data.response.docs.length,t.numFound=e.data.response.numFound,t.maxScore=e.data.response.maxScore,t.siteState.loading=!1},function(e){console.error(e),t.siteState.loading=!1})):void 0},t.prototype.getResults=function(){return this.results},t.prototype.getFacets=function(){return this.facets},t.prototype.nextPage=function(){var t=this;if(this.siteState.loading!==!0&&this.start>0&&this.documentIds.length<this.numFound){this.siteState.loading=!0;var r=QueryService.getHttpRequestParamObject();r.start=this.start,e({method:"GET",url:ENV.searchEndpoint+"search/",params:r}).then(function(e){for(var r=e.data.response.docs,o=0;o<r.length;o++)-1===t.documentIds.indexOf(r[o].id)&&(this.results.push(r[o]),t.documentIds.push(r[o].id));angular.extend(this.expanded,e.data.expanded),angular.extend(this.facets,e.data.facets),t.start=this.results.length,t.siteState.loading=!1},function(e){console.error(e),t.siteState.loading=!1})}},t.prototype.reset=function(){this.start=0,this.siteState={loading:!1},this.expanded={},this.numFound=0,this.maxScore=0,this.news=[],this.results=[],this.documentIds=[]},{Instance:t}}e.$inject=["$http"],angular.module("newscombinatorKeywords").factory("SolrRequest",e)}(),SolrQuery.prototype.setRows=function(e){this.rows=e},SolrQuery.prototype.setFilterQuery=function(e,t){this.filterQueries[e]=t},SolrQuery.prototype.getFilterQueries=function(){return this.filterQueries},SolrQuery.prototype.getRows=function(){return this.rows},SolrQuery.prototype.getHttpRequestParamObject=function(){var e={q:this.getQueryString(),rows:this.rows};return e=this.getFilterQueryObject(e),this.facetQuery!=={}&&(e.facetting=this.getFacetQueryJson()),e},SolrQuery.prototype.getQueryString=function(){var e="";return(0!==this.importancy.points||0!==this.importancy.age)&&(e+="( ",this.importancy.points>0&&(e+='_val_:"log(add(1,num_total_points))"^'+3*this.importancy.points+" "),this.importancy.age>0&&(e+='_val_:"recip(ms(NOW/HOUR,created_at),3.16e-11,2700,1)"^'+this.importancy.age+" "),e+=" )"),this.keywords.length>0&&(e+=" "+this.keywords+" "),e},SolrQuery.prototype.getFilterQueryObject=function(e){for(var t=e||{},r=0,o=0;o<this.filterQuery.length;o++)t["fq["+r+"]"]=this.filterQuery[o],r++;if(this.fromDate instanceof Date||this.toDate instanceof Date){var s="created_at:[";s+=this.fromDate instanceof Date?this.fromDate.toISOString():"*",s+=" TO ",s+=this.toDate instanceof Date?this.toDate.toISOString():"*",s+="]",t["fq["+r+"]"]=s,r++}return t},SolrQuery.prototype.solrEscape=function(e){for(var t=["\\","+","-","&","|","!","(",")","{","}","[","]","^","~","*","?",":",'"',";"," "],r=["\\\\","\\+","\\-","\\&","\\|","\\!","\\(","\\)","\\{","\\}","\\[","\\]","\\^","\\~","\\*","\\?","\\:",'\\"',"\\;","\\ "],o=0;o<t.length;o++)e=e.replace(t[o],r[o]);return e},SolrQuery.prototype.setFilterQueryFromArray=function(e){var t=this;angular.forEach(e,function(e){""!=e.keyword&&("text"==e.type.type?t.addFilterQuery(e.type.prefix+t.solrEscape(e.keyword)+e.type.postfix):"datepicker"==e.type.type?t.addFilterQuery(e.type.prefix+e.date.toISOString()+e.type.postfix):"slider"==e.type.type?t.addFilterQuery(e.type.prefix+e.keyword+e.type.postfix):"select"==e.type.type&&t.addFilterQuery(e.type.prefix+e.keyword+e.type.postfix),void 0!==e.type.override&&(vm[e.type.override]=e.keyword))})},SolrQuery.prototype.addFilterQuery=function(e){for(var t=0;t<this.filterQuery.length;t++)if(this.filterQuery[t]==e)return!1;return this.filterQuery.push(e),!0},SolrQuery.prototype.getFacetQueryJson=function(){return JSON.stringify(this.facetQuery)},SolrQuery.prototype.addFacetTerms=function(e,t,r,o,s,a,i){var c={};c.type="terms",c.field=t,void 0!==r&&r>=0&&(c.limit=r),void 0!==o&&o>=0&&(c.mincount=o),void 0!==a&&(c.domain=a),void 0!==i&&(c.sort=i),void 0!==s&&void 0!==this.facetQuery[s]?(void 0==this.facetQuery[s].facet&&(this.facetQuery[s].facet={}),this.facetQuery[s].facet[e]=c):this.facetQuery[e]=c},SolrQuery.prototype.addFacetRange=function(e,t,r,o,s,a,i,c){var n={};n.type="range",n.field=t,n.start=r,n.end=o,n.gap=s,void 0!==a&&a>=0&&(n.limit=a),void 0!==i&&i>=0&&(n.mincount=i),void 0!==c&&void 0!==this.facetQuery[c]?this.facetQuery[c].facet[e]=n:this.facetQuery[e]=n},SolrQuery.prototype.addFacetFunction=function(e,t,r){void 0!==r&&void 0!==this.facetQuery[r]&&(this.facetQuery[r].facet[e]=t)},SolrQuery.prototype.removeFilterQueryByIndex=function(e){void 0!==this.filterQuery[e]&&this.filterQuery.splice(e,1)},SolrQuery.prototype.getFilterQueryIndexFromString=function(e){for(var t=0;t<this.filterQuery.length;t++)if(this.filterQuery[t]===e)return t},SolrQuery.prototype.setKeywords=function(e){void 0===e||e.length<=0?this.keywords="*:*":this.keywords=e},SolrQuery.prototype.getImportancy=function(){return this.importancy},SolrQuery.prototype.resetQuery=function(){this.importancy={points:2.5,age:2.5},this.filterQuery=[],this.fromDate=null,this.toDate=null,this.keywords="",this.rows=10},function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("newscombinatorKeywords").directive("acmeNavbar",e)}(),function(){"use strict";function e(e){function t(t,r,o){function s(){a.loading=!0,void 0!==i&&o.cancel(i),i=o(a.loadChart,1500)}var a=this;a.chartoptions={chart:{type:"pieChart",height:150,width:150,x:function(e){return e.key},y:function(e){return e.y},showLabels:!1,duration:1e3,labelThreshold:1,labelSunbeamLayout:!0,showLegend:!1}},a.keywordsdata=[],a.addKeyword=function(e){a.data.keywords.push({type:r("filter")(a.data.keywordTypes,{typeValue:"general"})[0],keyword:e}),a.loadChart()},a.loadChart=function(){a.loading=!0;var t=new SolrQuery;t.setKeywords("*:*"),t.getImportancy().points=5,t.getImportancy().age=0,t.addFilterQuery("content_type:document"),t.addFilterQuery("on_frontpage:1"),t.setFilterQueryFromArray(a.data.keywords),t.setRows(20),t.addFacetTerms("keywords","title_terms",30,1),t.addFacetTerms("frontpage","on_frontpage",2,0,"keywords",{blockParent:"content_type:sourceitem"});var r=new e.Instance;r.setQuery(t),r.loadNews().then(function(){a.loading=!1,a.topResults=r.getResults(),a.keywordsdata=[],r.getFacets().count>0&&angular.forEach(r.getFacets().keywords.buckets,function(e){var t=[];angular.forEach(e.frontpage.buckets,function(e){0==e.val?t.push({key:"Not on Frontpage",y:e.count}):t.push({key:"On Frontpage",y:e.count})}),a.keywordsdata.push({keyword:e,chartdata:t})})}),t=new SolrQuery,t.setKeywords("*:*"),t.getImportancy().points=5,t.getImportancy().age=0,t.addFilterQuery("on_frontpage:0"),t.setFilterQueryFromArray(a.data.keywords),t.setRows(20),t.addFacetTerms("keywords","title_terms",30,1),t.addFacetTerms("frontpage","on_frontpage",2,0,"keywords",{blockParent:"content_type:sourceitem"});var o=new e.Instance;o.setQuery(t),o.loadNews().then(function(){a.topResults_non_fp=o.getResults(),a.keywordsdata_non_fp=[],o.getFacets().count>0&&angular.forEach(o.getFacets().keywords.buckets,function(e){var t=[];angular.forEach(e.frontpage.buckets,function(e){0==e.val?t.push({key:"Not on Frontpage",y:e.count}):t.push({key:"On Frontpage",y:e.count})}),a.keywordsdata_non_fp.push({keyword:e,chartdata:t})})})};var i;t.$watch("vm.data",s,!0)}t.$inject=["$scope","$filter","$timeout"];var r={restrict:"E",templateUrl:"app/components/keywordstable/keywordstable.html",scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return r}e.$inject=["SolrRequest"],angular.module("newscombinatorKeywords").directive("keywordsTable",e)}(),function(){"use strict";function e(e){function t(t,r,o){function s(){void 0!==n&&o.cancel(n),n=o(a.loadChart,550)}var a=this,i={Monday:0,Tuesday:1,Wednesday:2,Thursday:3,Friday:4,Saturday:5,Sunday:6},c=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];a.addKeyword=function(e){this.data.keywords.push(e)},a.options={chart:{type:"multiBarChart",height:450,margin:{top:20,right:20,bottom:50,left:70},x:function(e){return e[0]},y:function(e){return e[1]},multibar:{dispatch:{elementClick:function(e){a.data.keywords.push({type:r("filter")(a.data.keywordTypes,{typeValue:"found_weekdays_ss"})[0],keyword:c[e.data[0]]}),t.$apply(),a.loadChart()}}},duration:1e3,useInteractiveGuideline:!0,xAxis:{tickValues:[0,1,2,3,4,5,6],tickFormat:function(e){return c[e]},axisLabel:"Days of the Week"},yAxis:{tickFormat:function(e){return d3.format("s")(e)},axisLabel:"Number of Documents"},sortDescending:!1},title:{enable:!0,text:"Weekday Chart"},subtitle:{enable:!0,text:"This charts shows on which weekday how many documents were upvotes until the frontpage and which never landed there. It is sorted from the highest amount to the lowest. Sidenote: If you select documents which are posted on e.g. Monday, then you can see when the documents have been crossposted as well.",css:{"text-align":"center",margin:"10px 13px 0px 7px","font-size":"80%"}}},a.chartdata=[{values:[],key:"On Frontpage"},{values:[],key:"Not On Frontpage"}],a.loadChart=function(){var t=new SolrQuery;t.setKeywords("*:*"),t.getImportancy().points=0,t.getImportancy().age=0,t.addFilterQuery("content_type:document"),t.setFilterQueryFromArray(a.data.keywords),t.addFacetTerms("day_of_the_week","found_weekdays_ss",7,1,void 0,void 0,{count:"desc"}),t.addFacetTerms("frontpage","on_frontpage",2,0,"day_of_the_week",{blockParent:"content_type:sourceitem"});var r=new e.Instance;r.setQuery(t),r.loadNews().then(function(){a.chartdata[0].values=[],a.chartdata[1].values=[],r.getFacets().count>0&&angular.forEach(r.getFacets().day_of_the_week.buckets,function(e,t){void 0!==e.frontpage?angular.forEach(e.frontpage.buckets,function(t){t.val===!0?a.chartdata[0].values.push([i[e.val],t.count]):a.chartdata[1].values.push([i[e.val],t.count])}):(a.chartdata[0].values.push([i[e.val],null]),a.chartdata[1].values.push([i[e.val],null]))})})};var n;t.$watch("vm.data",s,!0)}t.$inject=["$scope","$filter","$timeout"];var r={restrict:"E",template:'<nvd3 options="vm.options" data="vm.chartdata"></nvd3>',scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return r}e.$inject=["SolrRequest"],angular.module("newscombinatorKeywords").directive("weekdayChart",e)}(),function(){"use strict";function e(e){function t(t,r,o){function s(){void 0!==d&&o.cancel(d),d=o(n.loadChart,550)}var a=JSON.parse('{                "table": "source",                "rows":                [                    {                        "source_id": 1,                        "source_link": "https://news.ycombinator.com/newest",                        "created": "2014-10-04 10:54:53",                        "source_description": "Y Combinator - Hacker News",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 3,                        "source_link": "https://lobste.rs/recent",                        "created": "2014-11-05 12:58:45",                        "source_description": "Lobsters",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 4,                        "source_link": "http://news.makerland.org/new/",                        "created": "2014-11-05 12:59:40",                        "source_description": "Makernews",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 5,                        "source_link": "http://www.reddit.com/r/BSD",                        "created": "2014-11-05 14:39:24",                        "source_description": "reddit - BSD",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 6,                        "source_link": "http://www.reddit.com/r/cableporn",                        "created": "2014-11-05 14:41:16",                        "source_description": "reddit - Cableporn",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 7,                        "source_link": "http://www.reddit.com/r/DataHoarder",                        "created": "2014-11-05 14:41:59",                        "source_description": "reddit - DataHoarder",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 8,                        "source_link": "http://www.reddit.com/r/devkit",                        "created": "2014-11-05 14:42:26",                        "source_description": "reddit - Devkit",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 9,                        "source_link": "http://www.reddit.com/r/ECE",                        "created": "2014-11-05 14:42:49",                        "source_description": "reddit - embeddedlinux",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 10,                        "source_link": "http://www.reddit.com/r/freebsd",                        "created": "2014-11-05 14:44:33",                        "source_description": "reddit - FreeBSD",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 11,                        "source_link": "http://www.reddit.com/r/haikuOS",                        "created": "2014-11-05 14:45:29",                        "source_description": "reddit - HaikuOS",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 12,                        "source_link": "http://www.reddit.com/r/homelab",                        "created": "2014-11-05 14:45:43",                        "source_description": "reddit - Homelab",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 13,                        "source_link": "http://www.reddit.com/r/kernel",                        "created": "2014-11-05 14:47:10",                        "source_description": "reddit - Kernel",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 14,                        "source_link": "http://www.reddit.com/r/linux",                        "created": "2014-11-05 14:47:26",                        "source_description": "reddit - Linux",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 15,                        "source_link": "http://www.reddit.com/r/linuxadmin",                        "created": "2014-11-05 14:47:43",                        "source_description": "reddit - Linuxadmin",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 16,                        "source_link": "http://www.reddit.com/r/linuxdev",                        "created": "2014-11-05 14:48:06",                        "source_description": "reddit - LinuxDev",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 17,                        "source_link": "http://www.reddit.com/r/linux_devices",                        "created": "2014-11-05 14:48:25",                        "source_description": "reddit - Linux Devices",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 18,                        "source_link": "http://www.reddit.com/r/NetBSD",                        "created": "2014-11-05 14:48:50",                        "source_description": "reddit - NetBSD",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 19,                        "source_link": "http://www.reddit.com/r/netsec",                        "created": "2014-11-05 14:49:10",                        "source_description": "reddit - NetSec",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 20,                        "source_link": "http://www.reddit.com/r/openbsd",                        "created": "2014-11-05 14:51:00",                        "source_description": "reddit - OpenBSD",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 21,                        "source_link": "http://www.reddit.com/r/opensourcehardware",                        "created": "2014-11-05 14:51:23",                        "source_description": "reddit - Opensource Hardware",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 22,                        "source_link": "http://www.reddit.com/r/openSUSE",                        "created": "2014-11-05 14:51:51",                        "source_description": "reddit - OpenSUSE",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 23,                        "source_link": "http://www.reddit.com/r/openwrt",                        "created": "2014-11-05 14:52:16",                        "source_description": "reddit - OpenWRT",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 24,                        "source_link": "http://www.reddit.com/r/osdev",                        "created": "2014-11-05 14:52:27",                        "source_description": "reddit - OS Dev",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 25,                        "source_link": "http://www.reddit.com/r/RTLSDR",                        "created": "2014-11-05 14:52:58",                        "source_description": "reddit - RTLSDR",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 26,                        "source_link": "http://www.reddit.com/r/sysadmin",                        "created": "2014-11-05 14:53:20",                        "source_description": "reddit - Sysadmin",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 27,                        "source_link": "http://www.reddit.com/r/systems",                        "created": "2014-11-05 14:53:37",                        "source_description": "reddit - Systems",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 28,                        "source_link": "http://www.reddit.com/r/unix",                        "created": "2014-11-05 14:53:53",                        "source_description": "reddit - Unix",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 29,                        "source_link": "http://www.reddit.com/r/usefulscripts",                        "created": "2014-11-05 14:54:07",                        "source_description": "reddit - Usefulscripts",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 30,                        "source_link": "http://www.reddit.com/r/REMath",                        "created": "2014-11-05 14:54:35",                        "source_description": "reddit - REMath",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 31,                        "source_link": "http://www.reddit.com/r/ReverseEngineering",                        "created": "2014-11-05 14:56:16",                        "source_description": "reddit - Reverse Engineering",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 32,                        "source_link": "http://www.reddit.com/r/lowlevel",                        "created": "2014-11-05 14:56:38",                        "source_description": "reddit - Lowlevel",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 33,                        "source_link": "http://www.reddit.com/r/vrd",                        "created": "2014-11-05 14:57:32",                        "source_description": "reddit - VRD",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 34,                        "source_link": "http://www.reddit.com/r/math",                        "created": "2014-11-05 14:57:54",                        "source_description": "reddit - Math",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 35,                        "source_link": "http://www.reddit.com/r/types",                        "created": "2014-11-05 14:58:23",                        "source_description": "reddit - Types",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 36,                        "source_link": "http://www.reddit.com/r/dependent_types",                        "created": "2014-11-05 14:58:39",                        "source_description": "reddit - Dependent Types",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 37,                        "source_link": "http://www.reddit.com/r/Coq",                        "created": "2014-11-05 14:59:08",                        "source_description": "reddit - Coq",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 38,                        "source_link": "http://www.reddit.com/r/haskell",                        "created": "2014-11-05 14:59:23",                        "source_description": "reddit - Haskell",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 39,                        "source_link": "http://www.reddit.com/r/ocaml",                        "created": "2014-11-05 14:59:46",                        "source_description": "reddit - Ocaml",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 40,                        "source_link": "http://www.reddit.com/r/crypto",                        "created": "2014-11-05 15:00:08",                        "source_description": "reddit - Crypto",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 41,                        "source_link": "http://www.reddit.com/r/fsharp",                        "created": "2014-11-05 15:00:24",                        "source_description": "reddit - FSharp",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 42,                        "source_link": "http://www.reddit.com/r/scala",                        "created": "2014-11-05 15:00:40",                        "source_description": "reddit - Scala",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 43,                        "source_link": "http://www.reddit.com/r/lisp",                        "created": "2014-11-05 15:00:51",                        "source_description": "reddit - Lisp",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 44,                        "source_link": "http://www.reddit.com/r/ProgrammingLanguages",                        "created": "2014-11-05 15:02:52",                        "source_description": "reddit - Programming Languages",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 45,                        "source_link": "http://www.reddit.com/r/dataisbeautiful",                        "created": "2014-11-05 15:03:30",                        "source_description": "reddit - Data is Beautiful",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 46,                        "source_link": "http://www.reddit.com/r/PhilosophyofMath",                        "created": "2014-11-05 15:03:52",                        "source_description": "reddit - Philospohy of Math",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 47,                        "source_link": "http://www.reddit.com/r/PhilosophyofScience",                        "created": "2014-11-05 15:04:23",                        "source_description": "reddit - Philosophy of Science",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 48,                        "source_link": "http://www.reddit.com/r/MachineLearning",                        "created": "2014-11-05 15:04:53",                        "source_description": "reddit - Machine Learning",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 49,                        "source_link": "http://www.reddit.com/r/IPython",                        "created": "2014-11-05 15:05:10",                        "source_description": "reddit - IPython",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 50,                        "source_link": "http://www.reddit.com/r/statistics",                        "created": "2014-11-05 15:05:24",                        "source_description": "reddit - Statistics",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 51,                        "source_link": "http://www.reddit.com/r/Design",                        "created": "2014-11-05 15:05:50",                        "source_description": "reddit - Design",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 52,                        "source_link": "http://www.reddit.com/r/webdev",                        "created": "2014-11-05 15:06:36",                        "source_description": "reddit - Webdev",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 53,                        "source_link": "http://www.reddit.com/r/web_design",                        "created": "2014-11-05 15:06:48",                        "source_description": "reddit - Webdesign",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 54,                        "source_link": "http://www.reddit.com/r/Frontend",                        "created": "2014-11-05 15:07:02",                        "source_description": "reddit - Frontend",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 55,                        "source_link": "http://www.reddit.com/r/duckduckgo",                        "created": "2014-11-05 15:07:34",                        "source_description": "reddit - DuckDuckGo",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 56,                        "source_link": "http://www.reddit.com/r/node",                        "created": "2014-11-05 15:07:53",                        "source_description": "reddit - NodeJS",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 57,                        "source_link": "http://www.reddit.com/r/angularjs",                        "created": "2014-11-05 15:09:01",                        "source_description": "reddit - Angular JS",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 58,                        "source_link": "http://www.reddit.com/r/sysor",                        "created": "2014-11-05 15:09:42",                        "source_description": "reddit - Sysor",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 59,                        "source_link": "http://www.reddit.com/r/optimization",                        "created": "2014-11-05 15:09:56",                        "source_description": "reddit - Optimization",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 60,                        "source_link": "http://www.reddit.com/r/algorithms",                        "created": "2014-11-05 15:10:14",                        "source_description": "reddit - Algorithms",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 61,                        "source_link": "http://www.reddit.com/r/BusinessIntelligence",                        "created": "2014-11-05 15:10:58",                        "source_description": "reddit - Business Intelligence",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 62,                        "source_link": "http://www.reddit.com/r/Database",                        "created": "2014-11-05 15:11:13",                        "source_description": "reddit - Database",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 63,                        "source_link": "http://www.reddit.com/r/datasets",                        "created": "2014-11-05 15:11:26",                        "source_description": "reddit - Datasets",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 64,                        "source_link": "http://www.reddit.com/r/datascience",                        "created": "2014-11-05 15:11:47",                        "source_description": "reddit - Data Science",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 65,                        "source_link": "http://www.reddit.com/r/opendata",                        "created": "2014-11-05 15:12:08",                        "source_description": "reddit - OpenData",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 66,                        "source_link": "http://www.reddit.com/r/analyzit",                        "created": "2014-11-05 15:12:27",                        "source_description": "reddit - Analyzit",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 67,                        "source_link": "http://www.reddit.com/r/semanticweb",                        "created": "2014-11-05 15:12:43",                        "source_description": "reddit - Semantic Web",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 68,                        "source_link": "http://www.reddit.com/r/visualization",                        "created": "2014-11-05 15:13:02",                        "source_description": "reddit - Visualization",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 69,                        "source_link": "http://www.reddit.com/r/analytics",                        "created": "2014-11-05 15:13:16",                        "source_description": "reddit - Analytics",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 70,                        "source_link": "http://www.reddit.com/r/programming",                        "created": "2014-11-05 15:18:03",                        "source_description": "reddit - Programming",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 71,                        "source_link": "http://www.reddit.com/r/Python",                        "created": "2014-11-05 15:18:32",                        "source_description": "reddit - Python",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 72,                        "source_link": "http://www.reddit.com/r/django",                        "created": "2014-11-05 15:18:45",                        "source_description": "reddit - Django",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 73,                        "source_link": "http://lesswrong.com/r/discussion",                        "created": "2014-11-05 15:20:16",                        "source_description": "Lesswrong Discussion",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 74,                        "source_link": "http://soylentnews.org/",                        "created": "2014-11-05 15:21:46",                        "source_description": "Soylent News",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 75,                        "source_link": "http://slashdot.org/",                        "created": "2014-11-05 15:23:57",                        "source_description": "Slashdot.org",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 76,                        "source_link": "http://www.reddit.com/r/coding",                        "created": "2014-11-05 15:25:25",                        "source_description": "reddit - Coding",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 77,                        "source_link": "http://digg.com/tag/technology",                        "created": "2014-11-05 15:28:30",                        "source_description": "digg - technology",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 78,                        "source_link": "http://coinspotting.com/newest",                        "created": "2014-11-05 15:30:05",                        "source_description": "Coinspotting - for Cryptocurrencies",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 79,                        "source_link": "http://www.datatau.com/newest",                        "created": "2014-11-05 15:30:28",                        "source_description": "DataTau - for Data Scientists",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 80,                        "source_link": "http://firespotting.com/newest",                        "created": "2014-11-05 15:30:49",                        "source_description": "Firespotting - for Ideas",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 81,                        "source_link": "http://www.medtechnologynews.com/newest",                        "created": "2014-11-05 15:32:08",                        "source_description": "Med Technology News - Hacker News for medical technology",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 82,                        "source_link": "http://inbound.org/",                        "created": "2014-11-05 15:34:29",                        "source_description": "Inbound - For Marketing",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 83,                        "source_link": "http://pullup.io/news",                        "created": "2014-11-05 15:35:34",                        "source_description": "Pullup.io - NodeJS related",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 84,                        "source_link": "http://lamernews.com/latest/0",                        "created": "2014-11-05 15:36:22",                        "source_description": "Lamernews",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 85,                        "source_link": "http://www.woodspotting.com/latest/0",                        "created": "2014-11-05 15:39:11",                        "source_description": "WoodSpotting ",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 86,                        "source_link": "http://www.reddit.com/r/Entrepreneur",                        "created": "2014-11-05 15:55:48",                        "source_description": "reddit - Entrepeneur",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 87,                        "source_link": "http://www.reddit.com/r/smallbusiness",                        "created": "2014-11-05 15:56:10",                        "source_description": "reddit - Smallbusiness",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 88,                        "source_link": "http://www.reddit.com/r/startups",                        "created": "2014-11-05 15:56:24",                        "source_description": "reddit - Startups",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 89,                        "source_link": "http://www.echojs.com/latest/0",                        "created": "2014-11-05 15:57:00",                        "source_description": "Echo JS - News for Javascript",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 91,                        "source_link": "https://usv.com/",                        "created": "2014-11-05 16:01:21",                        "source_description": "USV - Union Square Ventures",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 92,                        "source_link": "http://devmaster.net/",                        "created": "2014-11-05 16:05:55",                        "source_description": "Devmaster - Game Development News &amp; Links",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 93,                        "source_link": "http://www.dzone.com/links/queue.html",                        "created": "2014-11-05 16:09:03",                        "source_description": "Dzone - Smart Content For Tech Professionals",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 94,                        "source_link": "http://www.reddit.com/r/Bitcoin",                        "created": "2014-11-05 16:10:12",                        "source_description": "reddit - Bitcoin",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 95,                        "source_link": "http://www.reddit.com/r/Ingress",                        "created": "2014-11-21 19:58:47",                        "source_description": "reddit - Ingress",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 96,                        "source_link": "http://www.reddit.com/r/gamification",                        "created": "2014-11-21 20:03:54",                        "source_description": "reddit - Gamification",                        "source_active": 0,                        "source_rss": 0                    },                    {                        "source_id": 97,                        "source_link": "http://www.reddit.com/r/fintech",                        "created": "2015-05-30 07:22:23",                        "source_description": "reddit - Financial Technology",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 98,                        "source_link": "http://www.reddit.com/r/accounting",                        "created": "2015-05-30 07:40:49",                        "source_description": "reddit - Accounting",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 99,                        "source_link": "http://www.reddit.com/r/business",                        "created": "2015-05-30 07:43:31",                        "source_description": "reddit - Business",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 101,                        "source_link": "http://www.reddit.com/r/InternationalBusiness",                        "created": "2015-05-30 07:43:31",                        "source_description": "reddit - International Business",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 102,                        "source_link": "http://www.reddit.com/r/Insidernews",                        "created": "2015-05-30 07:43:31",                        "source_description": "reddit - Insidernews",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 103,                        "source_link": "http://www.reddit.com/r/IOT",                        "created": "2015-05-30 07:43:31",                        "source_description": "reddit - Internet of Things (IoT)",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 104,                        "source_link": "https://javascriptkicks.com",                        "created": "2015-08-01 08:12:58",                        "source_description": "JavaScript Kicks",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 105,                        "source_link": null,                        "created": "2016-02-13 02:12:54",                        "source_description": "Twitter Stream",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 106,                        "source_link": "http://www.reddit.com/r/worldnews",                        "created": "2016-02-13 05:03:42",                        "source_description": "reddit - World News",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 107,                        "source_link": null,                        "created": "2016-02-13 02:13:14",                        "source_description": "Securities and Exchange Commission (SEC) - Edgar filings",                        "source_active": 1,                        "source_rss": 0                    },                    {                        "source_id": 108,                        "source_link": "http://www.epcengineer.com/rss/news/category/1/projects",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Projects",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 109,                        "source_link": "http://www.epcengineer.com/rss/news/category/2/finance-investment",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Finance",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 110,                        "source_link": "http://www.epcengineer.com/rss/news/category/3/contract-awards",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Contract Awards",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 111,                        "source_link": "http://www.epcengineer.com/rss/news/category/4/engineering-construction",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Engineering Construction",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 112,                        "source_link": "http://www.epcengineer.com/rss/news/category/5/operations-maintenance",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Operation Construction",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 113,                        "source_link": "http://www.epcengineer.com/rss/news/category/6/exploration-survey",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Exploration Survey",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 114,                        "source_link": "http://www.epcengineer.com/rss/news/category/7/production",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Production",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 115,                        "source_link": "http://feeds.feedburner.com/TechCrunch/",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Techcrunch",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 116,                        "source_link": "http://feeds.feedburner.com/Makeuseof?format=xml",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - MakeUseOf",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 117,                        "source_link": "http://feeds.feedburner.com/giveawayoftheday/feed?format=xml",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - GiveAway of the Day",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 118,                        "source_link": "http://feeds.gawker.com/lifehacker/full",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Lifehacker",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 119,                        "source_link": "http://feeds.feedburner.com/Mashable?format=xml",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Mashable",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 120,                        "source_link": "http://feeds.feedburner.com/QuickOnlineTips?format=xml",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Quick Online Tips",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 122,                        "source_link": "http://www.epcengineer.com/rss/news/category/8/legal-regulatory",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Legal and Regulatory",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 123,                        "source_link": "http://www.epcengineer.com/rss/news/category/9/research-development",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Research and Development",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 124,                        "source_link": "http://www.epcengineer.com/rss/news/oil-and-gas",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Oil and Gas News",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 125,                        "source_link": "http://www.epcengineer.com/rss/news/mining-and-minerals",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Mining and Minerals",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 126,                        "source_link": "http://www.epcengineer.com/rss/news/power-and-energy",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Power and Energy",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 127,                        "source_link": "http://www.epcengineer.com/rss/news/building-and-infrastructure",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - EPCEngineer - Building and Infrastructure",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 129,                        "source_link": "http://feeds.reuters.com/reuters/businessNews?format=xml",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Reuters Business News",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 130,                        "source_link": "http://feeds.reuters.com/reuters/companyNews?format=xml",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Reuters Company News",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 131,                        "source_link": "http://feeds.reuters.com/reuters/scienceNews?format=xml",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Reuters Science News",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 132,                        "source_link": "http://feeds.reuters.com/Reuters/worldNews?format=xml",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Reuters World News",                        "source_active": 1,                        "source_rss": 1                    },                    {                        "source_id": 133,                        "source_link": "http://www.constructionweekonline.com/rssFeed/WebRssFeeds/TENDERS/",                        "created": "2016-03-28 15:39:03",                        "source_description": "RSS - Tenders - Construction Week Online",                        "source_active": 1,                        "source_rss": 1                    }                ]            }'),i=[],c=[];
angular.forEach(a.rows,function(e){i[e.source_id]=e.source_description,null!=e.source_link&&(c[e.source_id]=e.source_link.replace(/\/newest$|\/recent$|\/links\/queue\.html$/,""))});var n=this;n.options={chart:{type:"discreteBarChart",height:450,margin:{top:20,right:20,bottom:150,left:70},x:function(e){return e[0]},y:function(e){return e[1]},discretebar:{dispatch:{elementClick:function(e){var t=!1;angular.forEach(n.data.keywords,function(r){"source"==r.type.typeValue&&(t=!0,r.keyword=c[e.data[0]])}),t||n.data.keywords.push({type:r("filter")(n.data.keywordTypes,{typeValue:"source"})[0],keyword:c[e.data[0]]}),n.loadChart()}}},duration:100,xAxis:{tickFormat:function(e){return i[e]},rotateLabels:-45,axisLabel:"Sources of the documents in Index"},yAxis:{tickFormat:function(e){return d3.format("s")(e)}}},title:{enable:!0,text:"Sources Chart"},subtitle:{enable:!0,text:"Where are those links submitted? Or where were they cross-posted?",css:{"text-align":"center",margin:"10px 13px 0px 7px","font-size":"80%"}}},n.chartdata=[{key:"Number of Documents per Source",values:[]}],n.loadChart=function(){var t=new SolrQuery;t.setKeywords("*:*"),t.getImportancy().points=0,t.getImportancy().age=0,t.addFilterQuery("content_type:document"),t.setFilterQueryFromArray(n.data.keywords),t.addFacetTerms("source_sites","source_site_ids_is",10,1);var r=new e.Instance;r.setQuery(t),r.loadNews().then(function(){n.chartdata[0].values=[],r.getFacets().count>0&&(angular.forEach(r.getFacets().source_sites.buckets,function(e){n.chartdata[0].values.push([e.val,e.count])}),console.log(n.chartdata))})};var d;t.$watch("vm.data",s,!0)}t.$inject=["$scope","$filter","$timeout"];var r={restrict:"E",template:'<nvd3 options="vm.options" data="vm.chartdata"></nvd3>',scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return r}e.$inject=["SolrRequest"],angular.module("newscombinatorKeywords").directive("sourceChart",e)}(),function(){"use strict";function e(e){function t(t,r,o){function s(){void 0!==i&&o.cancel(i),i=o(a.loadChart,550)}var a=this;a.options={chart:{type:"multiChart",height:450,margin:{top:20,right:60,bottom:50,left:70},duration:1e3,reduceXTicks:!1,useInteractiveGuideline:!0,bars1:{stacked:!0,dispatch:{elementClick:function(e){var t=!1;angular.forEach(a.data.keywords,function(r){"found_hours_is"==r.type.typeValue&&(t=!0,r.keyword=e.data.x)}),t||a.data.keywords.push({type:r("filter")(a.data.keywordTypes,{typeValue:"found_hours_is"})[0],keyword:e.data.x}),a.loadChart()}}},yAxis1:{tickFormat:function(e){return d3.format("s")(e)},axisLabel:"Number of Documents"},yAxis2:{tickFormat:function(e){return e+"%"},axisLabel:"Pickup Rate"},xAxis:{axisLabel:"Hours of the Day"}},title:{enable:!0,text:"Hour of the day chart"},subtitle:{enable:!0,text:"This chart shows at which time of the day how many documents landed on the frontpage and which ones not.",css:{"text-align":"center",margin:"10px 13px 0px 7px","font-size":"80%"}}},a.chartdata=[{values:[],key:"On Frontpage",yAxis:1,type:"bar"},{values:[],key:"Not On Frontpage",yAxis:1,type:"bar"},{values:[],key:"Pickup Rate",yAxis:2,type:"line"}],a.loadChart=function(){var t=new SolrQuery;t.setKeywords("*:*"),t.getImportancy().points=0,t.getImportancy().age=0,t.addFilterQuery("content_type:document"),t.setFilterQueryFromArray(a.data.keywords),t.addFacetTerms("hours_of_the_day","found_hours_is",24,1,void 0,void 0,{index:"asc"}),t.addFacetTerms("frontpage","on_frontpage",2,0,"hours_of_the_day",{blockParent:"content_type:sourceitem"});var r=new e.Instance;r.setQuery(t),r.loadNews().then(function(){a.chartdata[0].values=[],a.chartdata[1].values=[],a.chartdata[2].values=[],r.getFacets().count>0&&angular.forEach(r.getFacets().hours_of_the_day.buckets,function(e){if(void 0!==e.frontpage){var t=0,r=0;angular.forEach(e.frontpage.buckets,function(o){o.val===!0?(a.chartdata[0].values.push({x:e.val,y:o.count}),t=o.count):(a.chartdata[1].values.push({x:e.val,y:o.count}),r=o.count)}),a.chartdata[2].values.push({x:e.val,y:Math.round(t/(r+t)*100)})}else a.chartdata[0].values.push({x:e.val,y:0}),a.chartdata[1].values.push({x:e.val,y:null}),a.chartdata[2].values.push({x:e.val,y:null})})})};var i;t.$watch("vm.data",s,!0)}t.$inject=["$scope","$filter","$timeout"];var r={restrict:"E",template:'<nvd3 options="vm.options" data="vm.chartdata"></nvd3>',scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return r}e.$inject=["SolrRequest"],angular.module("newscombinatorKeywords").directive("hoursPickupChart",e)}(),function(){"use strict";function e(e){function t(t,r,o){function s(){void 0!==i&&o.cancel(i),i=o(a.loadChart,550)}var a=this;a.options={chart:{type:"multiBarChart",height:450,margin:{top:20,right:20,bottom:50,left:70},x:function(e){return e[0]},y:function(e){return e[1]},multibar:{dispatch:{elementClick:function(e){a.data.keywords.push({type:r("filter")(a.data.keywordTypes,{typeValue:"found_hours_is"})[0],keyword:e.data[0]}),t.$apply(),a.loadChart()}}},duration:1e3,useInteractiveGuideline:!0,reduceXTicks:!1,yAxis:{tickFormat:function(e){return d3.format("s")(e)},axisLabel:"#Documents"},xAxis:{axisLabel:"Hours of the Day"}},title:{enable:!0,text:"Hour of the day chart"},subtitle:{enable:!0,text:"This chart shows at which time of the day how many documents landed on the frontpage and which ones not.",css:{"text-align":"center",margin:"10px 13px 0px 7px","font-size":"80%"}}},a.chartdata=[{values:[],key:"On Frontpage"},{values:[],key:"Not On Frontpage"}],a.loadChart=function(){var t=new SolrQuery;t.setKeywords("*:*"),t.getImportancy().points=0,t.getImportancy().age=0,t.addFilterQuery("content_type:document"),t.setFilterQueryFromArray(a.data.keywords),t.addFacetTerms("hours_of_the_day","found_hours_is",24,1,void 0,void 0,{index:"asc"}),t.addFacetTerms("frontpage","on_frontpage",2,0,"hours_of_the_day",{blockParent:"content_type:sourceitem"});var r=new e.Instance;r.setQuery(t),r.loadNews().then(function(){a.chartdata[0].values=[],a.chartdata[1].values=[],r.getFacets().count>0&&angular.forEach(r.getFacets().hours_of_the_day.buckets,function(e){void 0!==e.frontpage?angular.forEach(e.frontpage.buckets,function(t){t.val===!0?a.chartdata[0].values.push([e.val,t.count]):a.chartdata[1].values.push([e.val,t.count])}):(a.chartdata[0].values.push([e.val,null]),a.chartdata[1].values.push([e.val,null]))})})};var i;t.$watch("vm.data",s,!0)}t.$inject=["$scope","$filter","$timeout"];var r={restrict:"E",template:'<nvd3 options="vm.options" data="vm.chartdata"></nvd3>',scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return r}e.$inject=["SolrRequest"],angular.module("newscombinatorKeywords").directive("hoursChart",e)}(),function(){"use strict";function e(e){function t(t,r,o){function s(){void 0!==i&&o.cancel(i),i=o(a.loadChart,550)}var a=this;a.options={chart:{lines:{dispatch:{elementClick:function(e){var t=!1;angular.forEach(a.data.keywords,function(r){"minPoints"==r.type.typeValue&&(t=!0,r.keyword=e[0].point.x)}),t||a.data.keywords.push({type:r("filter")(a.data.keywordTypes,{typeValue:"minPoints"})[0],keyword:e[0].point.x}),a.loadChart()}}},interactiveLayer:{tooltip:{contentGenerator:function(e){var t=e.value+" to "+(e.value+25);return"<h3>Number of Documents</h3><br />"+e.series[0].value+" Links with "+t+" "+e.series[0].key+"<br />"+e.series[1].value+" Links with "+t+" "+e.series[1].key}}},type:"lineChart",height:400,margin:{top:20,right:20,bottom:80,left:70},x:function(e){return e.x},xAxis:{axisLabel:"#Documents with #Points/#Comments across Aggregators (Ycombinator, Reddit,...)",rotateLabels:-45},y:function(e){return e.y},useInteractiveGuideline:!0,duration:1e3,yAxis:{tickFormat:function(e){return d3.format("s")(e)}}},title:{enable:!0,text:"Number of Documents per Points/Comments"},subtitle:{enable:!0,text:"This shows the number of documents that received a certain number of points (upvotes) or comments. It is in 25 increments (0-24, 25-49,...)",css:{"text-align":"center",margin:"10px 13px 0px 7px","font-size":"80%"}}},a.chartdata=[{values:[],key:"Points"},{values:[],key:"Comments"}],a.loadChart=function(){var t=new SolrQuery;t.setKeywords("*:*"),t.getImportancy().points=0,t.getImportancy().age=0,t.addFilterQuery("content_type:document"),t.setFilterQueryFromArray(a.data.keywords),t.addFacetRange("points","num_total_points",0,500,25,void 0,0),t.addFacetRange("comments","num_total_comments",0,500,25,void 0,0);var r=new e.Instance;r.setQuery(t),r.loadNews().then(function(){a.chartdata[0].values=[],a.chartdata[1].values=[],r.getFacets().count>0&&(angular.forEach(r.getFacets().points.buckets,function(e){a.chartdata[0].values.push({x:e.val,y:e.count})}),angular.forEach(r.getFacets().comments.buckets,function(e){a.chartdata[1].values.push({x:e.val,y:e.count})}))})};var i;t.$watch("vm.data",s,!0)}t.$inject=["$scope","$filter","$timeout"];var r={restrict:"E",template:'<nvd3 options="vm.options" data="vm.chartdata"></nvd3>',scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return r}e.$inject=["SolrRequest"],angular.module("newscombinatorKeywords").directive("documentsPerPointsChart",e)}(),function(){"use strict";function e(e){function t(t,r,o){function s(){void 0!==i&&o.cancel(i),i=o(a.loadChart,550)}var a=this;a.options={chart:{type:"stackedAreaChart",height:450,margin:{top:20,right:20,bottom:30,left:70},x:function(e){return e[0]},y:function(e){return e[1]},duration:1e3,useInteractiveGuideline:!0,yAxis:{tickFormat:function(e){return d3.format("s")(e)}}},title:{enable:!0,text:"Number of Documents on Frontpage"},subtitle:{enable:!0,text:"This Chart shows the number of Documents which landed on the frontpage vs. the number of documents which never made it there.",css:{"text-align":"center",margin:"10px 13px 0px 7px","font-size":"80%"}}},a.chartdata=[{values:[],key:"On Frontpage"},{values:[],key:"Not On Frontpage"}],a.loadChart=function(){var t=new SolrQuery;t.setKeywords("*:*"),t.getImportancy().points=0,t.getImportancy().age=0,t.addFilterQuery("content_type:document"),t.setFilterQueryFromArray(a.data.keywords),t.addFacetRange("points","num_total_points",0,500,25,void 0,0),t.addFacetTerms("frontpage","on_frontpage",2,0,"points",{blockParent:"content_type:sourceitem"});var r=new e.Instance;r.setQuery(t),r.loadNews().then(function(){a.chartdata[0].values=[],a.chartdata[1].values=[],r.getFacets().count>0&&angular.forEach(r.getFacets().points.buckets,function(e){void 0!==e.frontpage?angular.forEach(e.frontpage.buckets,function(t){t.val===!0?a.chartdata[0].values.push([e.val,t.count]):a.chartdata[1].values.push([e.val,t.count])}):(a.chartdata[0].values.push([e.val,null]),a.chartdata[1].values.push([e.val,null]))})})};var i;t.$watch("vm.data",s,!0)}t.$inject=["$scope","$filter","$timeout"];var r={restrict:"E",template:'<nvd3 options="vm.options" data="vm.chartdata"></nvd3>',scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return r}e.$inject=["SolrRequest"],angular.module("newscombinatorKeywords").directive("documentsOnFrontpageChart",e)}(),function(){"use strict";function e(e){function t(t,r,o){function s(){void 0!==i&&o.cancel(i),i=o(a.loadChart,550)}var a=this;a.options={chart:{type:"multiBarChart",height:450,margin:{top:20,right:20,bottom:100,left:70},x:function(e){return e[0]},y:function(e){return e[1]},multibar:{dispatch:{elementClick:function(e){var o=!1;angular.forEach(a.data.keywords,function(t){void 0!==t.date&&"startDate"==t.type.typeValue&&t.date instanceof Date&&(o=!0,t.date=e.data[0])}),o||a.data.keywords.push({type:r("filter")(a.data.keywordTypes,{typeValue:"startDate"})[0],date:e.data[0]}),t.$apply(),a.loadChart()}}},useVoronoi:!1,clipEdge:!1,duration:1e3,useInteractiveGuideline:!0,xAxis:{expanded:!0,showMaxMin:!0,rotateLabels:-45,tickFormat:function(e){return"From "+d3.time.format("%b %d, %Y")(new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()))}},yAxis:{tickFormat:function(e){return d3.format("s")(e)},axisLabel:"Number of Documents"}},title:{enable:!0,text:"Date Chart"},subtitle:{enable:!0,text:"How many submitted links landed on the frontpage between two specific dates?",css:{"text-align":"center",margin:"10px 13px 0px 7px","font-size":"80%"}}},a.chartdata=[{values:[],key:"On Frontpage"},{values:[],key:"Not On Frontpage"}],a.loadChart=function(){var t=new SolrQuery;t.setKeywords("*:*"),t.getImportancy().points=0,t.getImportancy().age=0,t.addFilterQuery("content_type:document"),t.setFilterQueryFromArray(a.data.keywords);var r="2015-01-01T00:00:00Z",o=(new Date).toISOString();angular.forEach(a.data.keywords,function(e){"startDate"==e.type.typeValue&&e.date instanceof Date&&(r=e.date.toISOString()),"endDate"==e.type.typeValue&&e.date instanceof Date&&(o=e.date.toISOString())}),t.addFacetRange("date","created_at",r,o,"+1MONTH",void 0,0),t.addFacetTerms("frontpage","on_frontpage",2,0,"date",{blockParent:"content_type:sourceitem"});var s=new e.Instance;s.setQuery(t),s.loadNews().then(function(){a.chartdata[0].values=[],a.chartdata[1].values=[],s.getFacets().count>0&&angular.forEach(s.getFacets().date.buckets,function(e){void 0!==e.frontpage?angular.forEach(e.frontpage.buckets,function(t){t.val===!0?a.chartdata[0].values.push([new Date(e.val),t.count]):a.chartdata[1].values.push([new Date(e.val),t.count])}):(a.chartdata[0].values.push([new Date(e.val),null]),a.chartdata[1].values.push([new Date(e.val),null]))})})};var i;t.$watch("vm.data",s,!0)}t.$inject=["$scope","$filter","$timeout"];var r={restrict:"E",template:'<nvd3 options="vm.options" data="vm.chartdata"></nvd3>',scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return r}e.$inject=["SolrRequest"],angular.module("newscombinatorKeywords").directive("dateChart",e)}(),function(){"use strict";function e(e){var t=this;t.keywords=[],t.keywordTypes=[{typeValue:"general",typeName:"Any Document-Field",prefix:"",postfix:"",type:"text"},{typeValue:"notGeneral",typeName:"Exclude Keyword",prefix:"-(",postfix:")",type:"text"},{typeValue:"linkTitle",typeName:"Link Title",prefix:"title_link:",postfix:"",type:"text"},{typeValue:"notLinkTitle",typeName:"Exclude Link Title",prefix:"-title_link:",postfix:"",type:"text"},{typeValue:"language",typeName:"Language (e.g. en)",prefix:"language:",postfix:"",type:"text"},{typeValue:"found_weekdays_ss",typeName:"Day of the Week (e.g. Sunday)",prefix:"found_weekdays_ss:",postfix:"",type:"select",values:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},{typeValue:"not_found_weekdays_ss",typeName:"NOT at that Day of the Week",prefix:"-found_weekdays_ss:",postfix:"",type:"select",values:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},{typeValue:"found_hours_is",typeName:"Hour of the Day (e.g. '14' for 2pm)",prefix:"found_hours_is:",postfix:"",type:"select",values:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]},{typeValue:"url",typeName:"Url",prefix:"url:",postfix:"",type:"text"},{typeValue:"source",typeName:"Source-Portal (e.g. reddit.com)",prefix:"source_sites_ss:*",postfix:"*",type:"text",values:["ycombinator.com","reddit.com","coinspotting.com","firespotting.com","sec.gov","lobste.rs","makerland.org","slashdot.org","soylendnews.org"]},{typeValue:"notSource",typeName:"Exclude Source-Portal",prefix:"-source_sites_ss:*",postfix:"*",type:"text"},{typeValue:"minPoints",typeName:"Min Upvotes",prefix:"num_total_points:[",postfix:" TO *]",type:"slider",step:5,min:0,max:1e3},{typeValue:"maxPoints",typeName:"Max Upvotes",prefix:"num_total_points:[* TO ",postfix:"]",type:"slider",step:5,min:0,max:1e3},{typeValue:"startDate",typeName:"Start Date",prefix:"created_at:[",postfix:" TO *]",type:"datepicker"},{typeValue:"endDate",typeName:"End Date",prefix:"created_at:[* TO ",postfix:" ]",type:"datepicker"}],t.directivedata={keywords:t.keywords,keywordTypes:t.keywordTypes},t.examplePickupRate=function(){t.keywords.push({type:e("filter")(t.keywordTypes,{typeValue:"source"})[0],keyword:"https://news.ycombinator.com"}),t.keywords.push({type:e("filter")(t.keywordTypes,{typeValue:"linkTitle"})[0],keyword:"Keyword Analytics"}),t.keywords.push({type:e("filter")(t.keywordTypes,{typeValue:"startDate"})[0],date:new Date(2016,2,1)})},t.addKeyword=function(){t.keywords.push({type:t.keywordTypes[0],keyword:""})}}e.$inject=["$filter"],angular.module("newscombinatorKeywords").controller("MainController",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("newscombinatorKeywords").run(e)}(),function(){"use strict";function e(e,t){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("newscombinatorKeywords").config(e)}(),function(){"use strict";angular.module("newscombinatorKeywords").constant("moment",moment)}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.theme("default")}e.$inject=["$logProvider","$mdThemingProvider"],angular.module("newscombinatorKeywords").config(e)}(),angular.module("newscombinatorKeywords").run(["$templateCache",function(e){e.put("app/main/main.html",'<div layout="column"><header><acme-navbar></acme-navbar></header><div layout="column" layout-padding=""><div layout="row"><div flex-offset="25" flex="50"><h3>Introduction</h3><p>The tool below shows different statistics about all the indexed links from <a href="http://www.newscombinator.com">The Newscombinator</a>. We are indexing in realtime whatever comes in from ycombinator, reddit, inbound, etc. Times are in UTC.<br><br>What is the tool useful for? <button ng-click="main.examplePickupRate()">Click here for example</button>, when you want to know the best pickup rate for a submission on YC. Or run any other arbitrary statistics with submitted links.<br><br>Refine your search by clicking into the charts directly.<br><br><br><br><br></p></div></div><form ng-submit="main.loadChart();" flex=""><div layout="column"><div layout="row" layout-fill="" layout-align="center center" ng-repeat="keywordObj in main.keywords"><md-button type="button" class="md-icon-button md-primary" ng-click="main.keywords.splice($index,1); main.loadChart();"><md-icon>clear</md-icon></md-button><md-input-container flex="20"><label>Type</label><md-select ng-model="keywordObj.type"><md-option ng-value="type" ng-repeat="type in main.keywordTypes">{{type.typeName}}</md-option></md-select></md-input-container><md-input-container flex="" ng-show="keywordObj.type.type == \'select\'"><label>Select a Value</label><md-select ng-model="keywordObj.keyword"><md-option ng-repeat="value in keywordObj.type.values" value="{{value}}">{{value}}</md-option></md-select></md-input-container><md-input-container flex="" ng-show="keywordObj.type.type == \'text\'"><label>One Keyword at a Time (e.g. *google.com* or Elon Musk)</label> <input name="url" ng-model="keywordObj.keyword"></md-input-container><md-input-container flex="" ng-show="keywordObj.type.type == \'datepicker\'"><div flex="" layout="" layout-align="end center"><span class="md-body-1">Choose a Date</span></div><md-datepicker ng-model="keywordObj.date" md-placeholder="Choose a Date" aria-label="Choose a Date"></md-datepicker></md-input-container><div flex="" ng-show="keywordObj.type.type == \'slider\'" layout-padding="50 0" layout="" layout-align="center center"><md-slider aria-label="{{type.typeName}}" flex="" md-discrete="" ng-model="keywordObj.keyword" step="{{keywordObj.type.step}}" min="{{keywordObj.type.min}}" max="{{keywordObj.type.max}}" ng-change="main.loadChart()"></md-slider></div></div><div layout="row" layout-fill="" layout-wrap=""><div layout="row" flex=""><md-button type="button" class="md-primary md-raised" ng-click="main.addKeyword();" flex=""><md-icon>add</md-icon>Add Search Criteria.</md-button></div></div></div></form><div layout="row" layout-padding=""><date-chart flex="" data="main.directivedata"></date-chart><source-chart flex="" data="main.directivedata"></source-chart></div><div layout="row" layout-padding=""><weekday-chart flex="" data="main.directivedata"></weekday-chart><hours-pickup-chart flex="" data="main.directivedata"></hours-pickup-chart></div><div layout="row" layout-padding=""><documents-per-points-chart flex="" data="main.directivedata"></documents-per-points-chart><documents-on-frontpage-chart flex="" data="main.directivedata"></documents-on-frontpage-chart></div><div layout="column" layout-padding="" layout-margin=""><keywords-table flex="" data="main.directivedata"></keywords-table></div></div></div>'),e.put("app/components/keywordstable/keywordstable.html",'<div layout="row"><div flex="" layout="column"><h2>Top Keywords which made it to the Frontpage</h2><md-progress-linear md-mode="indeterminate" ng-show="vm.loading"></md-progress-linear><md-card ng-repeat="result in vm.keywordsdata" ng-hide="vm.loading"><md-card-content><div layout="row"><nvd3 options="vm.chartoptions" data="result.chartdata"></nvd3><div layout="column"><a ng-click="vm.addKeyword(result.keyword.val);" href=""><h2>{{result.keyword.val}}</h2></a><p>{{result.keyword.count}} times in total<br>{{result.chartdata[0].y}} times {{result.chartdata[0].key}}<br>{{result.chartdata[1].y}} times {{result.chartdata[1].key}}</p></div></div></md-card-content></md-card></div><div flex="" layout="column"><h2>Keywords from documents not on the Frontpage</h2><md-progress-linear md-mode="indeterminate" ng-show="vm.loading"></md-progress-linear><md-card ng-repeat="result in vm.keywordsdata_non_fp" ng-hide="vm.loading"><md-card-content><div layout="row"><nvd3 options="vm.chartoptions" data="result.chartdata"></nvd3><div layout="column"><a ng-click="vm.addKeyword(result.keyword.val);" href=""><h2>{{result.keyword.val}}</h2></a><p>{{result.keyword.count}} times in total<br>{{result.chartdata[0].y}} times {{result.chartdata[0].key}}<br>{{result.chartdata[1].y}} times {{result.chartdata[1].key}}</p></div></div></md-card-content></md-card></div></div><div layout="row"><div flex="50" layout="column"><h2>Most upvoted Documents on Frontpage<md-icon>questionmark<md-tooltip md-direction="left">Refresh</md-tooltip></md-icon></h2><md-card ng-repeat="result in vm.topResults" ng-hide="vm.loading"><md-card-content><h2>{{result.title_link}}</h2><p><a href="{{result.url}}" target="_blank">{{result.url}}</a></p><p>{{result.content_short}}</p></md-card-content><md-card-footer><small>Found: {{result.created_at | date:\'short\'}} &bull;<md-icon>arrow_drop_up</md-icon>{{result.num_total_points}} &bull;<md-icon>forum</md-icon>{{result.num_total_comments}}</small></md-card-footer></md-card><md-progress-linear md-mode="indeterminate" ng-show="vm.loading"></md-progress-linear></div><div flex="50" layout="column"><h2>Most upvoted never on Frontpage</h2><md-card ng-repeat="result in vm.topResults_non_fp" ng-hide="vm.loading"><md-card-content><h2>{{result.title_link}}</h2><p><a href="{{result.url}}" target="_blank">{{result.url}}</a></p><p>{{result.content_short}}</p></md-card-content><md-card-footer><small>Found: {{result.created_at | date:\'short\'}} &bull;<md-icon>arrow_drop_up</md-icon>{{result.num_total_points}} &bull;<md-icon>forum</md-icon>{{result.num_total_comments}}</small></md-card-footer></md-card><md-progress-linear md-mode="indeterminate" ng-show="vm.loading"></md-progress-linear></div></div>'),e.put("app/components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="center center"><md-button href="https://www.newscombinator.com">Newscombinator Keywords</md-button></md-toolbar>')}]);
//# sourceMappingURL=../maps/scripts/app-ff09f8c9ae.js.map
